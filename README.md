# WordPress 后台管理助手 (油猴插件)

一款功能强大的WordPress后台管理油猴插件，让你在任何页面都能快速管理WordPress站点。

## 功能特性

### 1. 文章发布
- 可视化富文本编辑器
- 支持粗体、斜体、下划线、列表、标题、引用
- 插入链接和图片
- 选择文章分类和标签
- 支持立即发布、保存草稿、待审核状态
- 最近文章快速查看

### 2. 访客统计
- 今日/本周/本月/总访问量统计
- 内容统计：文章数、评论数
- 热门文章排行（按访问量）
- 支持多种统计插件：
  - WP Statistics（推荐）
  - Jetpack Stats
  - Koko Analytics
  - Post Views Counter
- 一键刷新数据

### 3. 网站设置
- 站点信息显示
- 深色/浅色主题切换
- 快捷链接：仪表盘、文章、评论、用户、主题、插件

### 4. 更多功能
- 文章列表管理（查看、编辑、删除）
- 最新评论查看
- 快捷操作（查看网站、刷新数据）

## 安装方法

### 方式一：通过Tampermonkey安装

1. 安装 [Tampermonkey](https://www.tampermonkey.net/) 浏览器扩展
2. 点击 Tampermonkey 图标 -> 创建新脚本
3. 删除默认内容，粘贴 `wordpress-admin-panel.user.js` 的全部代码
4. 按 Ctrl+S 保存

### 方式二：直接安装

1. 确保已安装 Tampermonkey 或 Greasemonkey
2. 直接在浏览器中打开 `wordpress-admin-panel.user.js` 文件
3. 点击"安装"按钮

## 使用方法

### 首次配置

1. 安装插件后，在任意页面右下角会出现一个蓝色的WordPress图标按钮
2. 点击按钮打开管理面板
3. 点击右上角的配置按钮（三个点图标）
4. 输入配置信息：
   - **站点地址**：`https://your-site.com`
   - **用户名**：WordPress管理员用户名
   - **应用密码**：在WordPress后台生成的应用程序密码

### 生成应用程序密码

> **重要**：应用程序密码 ≠ 登录密码，它是专门给第三方应用使用的独立密码。

1. 登录 WordPress 后台
2. 进入：**用户 → 个人资料**
3. 滚动到底部找到 **"应用程序密码"** 部分
4. 输入名称（如 "油猴插件"）
5. 点击 **"添加新的应用程序密码"**
6. **立即复制**生成的密码（格式如：`abcd efgh ijkl mnop qrst uvwx`）
7. 这个密码只显示一次，请妥善保存

### 发布文章

1. 打开管理面板，默认显示"发布"标签页
2. 输入文章标题
3. 使用富文本编辑器编写内容
4. 选择分类、输入标签
5. 选择发布状态
6. 点击"发布文章"按钮

### 查看统计

1. 点击"统计"标签页
2. 查看访问量数据（需安装统计插件）
3. 查看内容统计
4. 点击"刷新数据"获取最新统计

### 网站设置

1. 点击"设置"标签页
2. 查看站点信息
3. 使用快捷链接快速跳转到WordPress后台

### 更多功能

1. 点击"更多"标签页
2. 管理文章列表
3. 查看最新评论
4. 执行快捷操作

## 快捷菜单

在Tampermonkey菜单中可以快速访问：
- 配置WordPress站点
- 发布新文章
- 查看统计

## 技术说明

- 使用 WordPress REST API 进行数据交互
- 使用应用程序密码进行 Basic Auth 认证
- 支持跨域请求（通过 GM_xmlhttpRequest）
- 自动检测 REST API 端点格式（`/wp-json` 或 `?rest_route=`）
- 数据通过 GM_setValue/GM_getValue 或 localStorage 持久化存储

## 权限说明

插件需要以下权限：
- `GM_addStyle`: 注入样式
- `GM_setValue/GM_getValue`: 保存配置
- `GM_xmlhttpRequest`: 跨域请求WordPress REST API
- `GM_registerMenuCommand`: 注册菜单命令
- `@connect *`: 允许连接任意域名

## 注意事项

1. **必须使用应用程序密码**，不是WordPress登录密码
2. 用户角色需要是"管理员"或"编辑"才能发布文章
3. 访客统计功能需要安装统计插件（如 WP Statistics）
4. WordPress 版本需要 5.6+ 才支持应用程序密码
5. 建议在 HTTPS 站点上使用以确保数据安全

## 常见问题

### Q: 提示"您不能为此用户创建文章"
A: 检查是否使用了应用程序密码（不是登录密码），以及用户是否有发布权限。

### Q: 提示"您目前没有登录"
A: 应用密码可能不正确，请重新生成并配置。

### Q: 连接失败 HTTP 404
A: 站点可能使用非标准 REST API 路径，插件会自动尝试多种格式。

### Q: 访客统计显示"--"
A: 需要安装统计插件（如 WP Statistics、Jetpack Stats 等）。

## 主题切换

插件支持深色和浅色两种主题：
- 点击面板头部的月亮图标切换
- 或在设置页面点击"深色模式"开关

## 更新日志

### v1.3.0
- 完全重构UI布局
- 新增访客统计功能
- 支持多种统计插件
- 修复菜单遮挡问题
- 改进认证逻辑

### v1.2.0
- 添加访问统计面板
- 支持热门文章排行

### v1.1.0
- 修复跨域请求问题
- 支持多种 REST API 端点格式

### v1.0.0
- 初始版本发布

## 开发信息

- 版本: 1.3.0
- 作者: Weiruan
- 许可证: MIT

## 问题反馈

如有问题或建议，请提交 Issue。
